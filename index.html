<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>Fat Up Fone</title>
    </head>
    <body>

        <!-- Search Form -->
        <form id="labnol">
            <div class="speech">
                <textarea id="transcript" col="50" row="30">
                </textarea>
                <button onclick="startDictation()" type="button">
                    Speak
                </button>
            </div>
        </form>
        <script>
            function startDictation() {
                if (window.hasOwnProperty('webkitSpeechRecognition')) {

                    var recognition = new webkitSpeechRecognition();

                    recognition.continuous = false;
                    recognition.interimResults = false;

                    recognition.lang = "zh-HK";
                    recognition.start();

                    recognition.onresult = function(e) {
                        console.log(e);
                        document.getElementById('transcript').value =
                            e.results[0][0].transcript;
                        recognition.stop();
                        //document.getElementById('labnol').submit();
                    };

                    recognition.onerror = function(e) {
                        recognition.stop();
                    }

                } else {
                    document.getElementById('transcript').value = "Not supported"
                }
            }
        </script>
    </body>
</html>
